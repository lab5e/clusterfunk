<!doctype html>
<html>

<head>
    <title>Cluster status</title>
    <link rel="icon" type="image/png" href="cf_icon.png">
    <link rel="stylesheet" href="demo.css">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<!-- change -->

<body>
    <div class="heading">
        <img src="clusterfunk_logo.png" />
    </div>
    <div class="websocket-status" id="websocket-container">
        <span id="websocket">unknown</span>
    </div>

    <div class="content">
        <div class="section">
            <div class="node-info">
                <div class="node-info-label" id="node-color"></div>
                <div class="node-info-id" id="node-id">ID: fabacada0102</div>
                <div class="node-info-state" id="node-state">Operational</div>
                <div class="node-info-role" id="node-role">Leader</div>
            </div>
        </div>

        <div class="section">
            <h2>Proxying on local node</h2>
            <div id="node-proxy-container" class="rect">
                <svg id="node-proxy" class="chart">
                    <g class="plot"></g>
                </svg>
            </div>
            <p>
                This shows the number of proxied requests on the local node.
            </p>
        </div>
        <div class="section">
            <h2>Requests on local node</h2>
            <div id="node-request-container" class="rect">
                <svg id="node-request" class="chart">
                    <g class="xaxis"></g>
                    <g class="plot"> </g>
                    <g class="yaxis"></g>
                </svg>
            </div>
            <p>This shows the number of requests handled by the local node.</p>
        </div>
        <div class="section">
            <h2>Cluster requests</h2>
            <div id="cluster-request-container" class="rect">
                <svg id="cluster-request" class="chart">
                    <g class="xaxis"></g>
                    <g class="plot"> </g>
                    <g class="yaxis"></g>
                </svg>
            </div>
            <p>
                This shows the number of requests handled by the entire cluster.
            </p>
        </div>

        <div class="section">
            <h2>Network</h2>
            <div class="square" id="network-container">
                <svg id="cluster-network" class="chart">
                    <g id="cluster-links"></g>
                    <g id="cluster-nodes"></g>
                </svg>
            </div>
            <p>This is the cluster layout.</p>
        </div>

        <div class="section">
            <h2>Proxying</h2>
            <div class="square" id="chord-container">
                <svg id="cluster-chord" class="chart">

                </svg>
            </div>
            <p>This shows the number of request proxied between each node in
                the cluster. The size of the link from the node is proportional
                to the number of requests handled by that node.</p>
        </div>

        <div class="section tall wide">
            <table>
                <thead>
                    <tr>
                        <th>&nbsp;</th>
                        <th>Node ID</th>
                        <th>Role</th>
                        <th>Shards</th>
                        <th>Status page</th>
                    </tr>
                </thead>
                <tbody id="member-table">
                </tbody>
            </table>
            <p>This list shows all members in the cluster</p>
        </div>

    </div>
    <script src="proxying_stream.js"></script>
    <script src="local_requests.js"></script>
    <script src="cluster_requests.js"></script>
    <script src="utils.js"></script>
    <script src="proxying_chord.js"></script>
    <script src="cluster_network.js"></script>
    <script src="demo.js"></script>
</body>
<script>

    window.addEventListener('load', (e) => {
        start();
    });

</script>

</html>